<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Idiomatic.js : Principles of Writing Consistent, Idiomatic JavaScript" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Idiomatic.js</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/chetansastry/idiomatic.js">View on GitHub</a>

          <h1 id="project_title">Idiomatic.js</h1>
          <h2 id="project_tagline">Principles of Writing Consistent, Idiomatic JavaScript</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/chetansastry/idiomatic.js/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/chetansastry/idiomatic.js/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="principles-of-writing-consistent-idiomatic-javascript" class="anchor" href="#principles-of-writing-consistent-idiomatic-javascript"><span class="octicon octicon-link"></span></a>Principles of Writing Consistent, Idiomatic JavaScript</h1>

<h2>
<a name="all-code-in-any-code-base-should-look-like-a-single-person-typed-it-no-matter-how-many-people-contributed" class="anchor" href="#all-code-in-any-code-base-should-look-like-a-single-person-typed-it-no-matter-how-many-people-contributed"><span class="octicon octicon-link"></span></a>All code in any code-base should look like a single person typed it, no matter how many people contributed.</h2>

<blockquote>
<h3>
<a name="arguments-over-style-are-pointless-there-should-be-a-style-guide-and-you-should-follow-it" class="anchor" href="#arguments-over-style-are-pointless-there-should-be-a-style-guide-and-you-should-follow-it"><span class="octicon octicon-link"></span></a>"Arguments over style are pointless. There should be a style guide, and you should follow it"</h3>

<p><em>Rebecca</em> <em>Murphey</em></p>
</blockquote>

<p> </p>

<blockquote>
<h3>
<a name="part-of-being-a-good-steward-to-a-successful-project-is-realizing-that-writing-code-for-yourself-is-a-bad-idea-if-thousands-of-people-are-using-your-code-then-write-your-code-for-maximum-clarity-not-your-personal-preference-of-how-to-get-clever-within-the-spec" class="anchor" href="#part-of-being-a-good-steward-to-a-successful-project-is-realizing-that-writing-code-for-yourself-is-a-bad-idea-if-thousands-of-people-are-using-your-code-then-write-your-code-for-maximum-clarity-not-your-personal-preference-of-how-to-get-clever-within-the-spec"><span class="octicon octicon-link"></span></a>"Part of being a good steward to a successful project is realizing that writing code for yourself is a Bad Idea™. If thousands of people are using your code, then write your code for maximum clarity, not your personal preference of how to get clever within the spec."</h3>

<p><em>Idan</em> <em>Gazit</em></p>
</blockquote>

<h2>
<a name="important-non-idiomatic-stuff" class="anchor" href="#important-non-idiomatic-stuff"><span class="octicon octicon-link"></span></a>Important, Non-Idiomatic Stuff:</h2>

<h3>
<a name="code-quality-tools-resources--references" class="anchor" href="#code-quality-tools-resources--references"><span class="octicon octicon-link"></span></a>Code Quality Tools, Resources &amp; References</h3>

<ul>
<li>
<a href="http://docs.codehaus.org/display/SONAR/JavaScript+Plugin">JavaScript Plugin</a> for <a href="http://www.sonarsource.org/">Sonar</a>
</li>
<li><a href="https://github.com/jsoverson/plato">Plato</a></li>
<li><a href="http://jsperf.com/">jsPerf</a></li>
<li><a href="http://jsfiddle.net/">jsFiddle</a></li>
<li><a href="http://jsbin.com/">jsbin</a></li>
<li><a href="http://javascriptlint.com/">JavaScript Lint (JSL)</a></li>
<li><a href="http://jshint.com/">jshint</a></li>
<li><a href="http://jslint.org/">jslint</a></li>
</ul><h2>
<a name="get-smart" class="anchor" href="#get-smart"><span class="octicon octicon-link"></span></a>Get Smart</h2>

<h3>
<a name="annotated-ecmascript-51" class="anchor" href="#annotated-ecmascript-51"><span class="octicon octicon-link"></span></a><a href="http://es5.github.com/">Annotated ECMAScript 5.1</a>
</h3>

<h3>
<a name="ecmascript-language-specification-51-edition" class="anchor" href="#ecmascript-language-specification-51-edition"><span class="octicon octicon-link"></span></a><a href="http://ecma-international.org/ecma-262/5.1/">EcmaScript Language Specification, 5.1 Edition</a>
</h3>

<p>The following should be considered 1) incomplete, and 2) <em>REQUIRED READING</em>. I don't always agree with the style written by the authors below, but one thing is certain: They are consistent. Furthermore, these are authorities on the language.</p>

<ul>
<li><a href="http://rmurphey.com/blog/2012/04/12/a-baseline-for-front-end-developers/">Baseline For Front End Developers</a></li>
<li><a href="http://eloquentjavascript.net/">Eloquent JavaScript</a></li>
<li><a href="http://javascriptweblog.wordpress.com/">JavaScript, JavaScript</a></li>
<li><a href="http://rmurphey.com/">Adventures in JavaScript Development</a></li>
<li><a href="http://perfectionkills.com/">Perfection Kills</a></li>
<li><a href="http://www.crockford.com">Douglas Crockford's Wrrrld Wide Web</a></li>
<li><a href="https://github.com/rmurphey/js-assessment">JS Assessment</a></li>
<li><a href="http://anton.kovalyov.net/slides/gothamjs/">Leveraging Code Quality Tools by Anton Kovalyov</a></li>
</ul><h3>
<a name="build--deployment-process" class="anchor" href="#build--deployment-process"><span class="octicon octicon-link"></span></a>Build &amp; Deployment Process</h3>

<p>Projects should always attempt to include some generic means by which source can be linted, tested and compressed in preparation for production use. For this task, <a href="https://github.com/gruntjs/grunt">grunt</a> by Ben Alman is second to none and has officially replaced the "kits/" directory of this repo.</p>

<h3>
<a name="test-facility" class="anchor" href="#test-facility"><span class="octicon octicon-link"></span></a>Test Facility</h3>

<p>Projects <em>must</em> include some form of unit, reference, implementation or functional testing. Use case demos DO NOT QUALIFY as "tests". The following is a list of test frameworks, none of which are endorsed more than the other.</p>

<ul>
<li><a href="http://github.com/jquery/qunit">QUnit</a></li>
<li><a href="https://github.com/pivotal/jasmine">Jasmine</a></li>
<li><a href="https://github.com/cloudhead/vows">Vows</a></li>
<li><a href="https://github.com/visionmedia/mocha">Mocha</a></li>
<li><a href="http://hirojs.com/">Hiro</a></li>
<li><a href="https://code.google.com/p/js-test-driver/">JsTestDriver</a></li>
<li><a href="http://busterjs.org/">Buster.js</a></li>
<li><a href="http://sinonjs.org/">Sinon.js</a></li>
</ul><h2>
<a name="table-of-contents" class="anchor" href="#table-of-contents"><span class="octicon octicon-link"></span></a>Table of Contents</h2>

<ul>
<li><a href="#whitespace">Whitespace</a></li>
<li><a href="#spacing">Beautiful Syntax</a></li>
<li><a href="#type">Type Checking (Courtesy jQuery Core Style Guidelines)</a></li>
<li><a href="#cond">Conditional Evaluation</a></li>
<li><a href="#practical">Practical Style</a></li>
<li><a href="#naming">Naming</a></li>
<li><a href="#misc">Misc</a></li>
<li><a href="#native">Native &amp; Host Objects</a></li>
<li><a href="#comments">Comments</a></li>
<li><a href="#language">One Language Code</a></li>
</ul><hr><h2>
<a name="preface" class="anchor" href="#preface"><span class="octicon octicon-link"></span></a>Preface</h2>

<p>The following sections outline a <em>reasonable</em> style guide for modern JavaScript development and are not meant to be prescriptive. The most important take-away is the <strong>law of code style consistency</strong>. Whatever you choose as the style for your project should be considered law. Link to this document as a statement of your project's commitment to code style consistency, readability and maintainability.</p>

<h2>
<a name="idiomatic-style-manifesto" class="anchor" href="#idiomatic-style-manifesto"><span class="octicon octicon-link"></span></a>Idiomatic Style Manifesto</h2>

<ol>
<li>
<p><a name="whitespace">Whitespace</a></p>

<ul>
<li>Indent with tabs, align with spaces.

<ul>
<li>Use tabs to indent your code.</li>
<li>Use spaces only to align documentation, so that they stay lined up irrespective of tab sizes.</li>
<li>Never mix tabs and spaces.</li>
</ul>
</li>
<li>If your editor supports it, always work with the "show invisibles" setting turned on. The benefits of this practice are:

<ul>
<li>Enforced consistency</li>
<li>Eliminating end of line whitespace</li>
<li>Eliminating blank line whitespace</li>
<li>Commits and diffs that are easier to read</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a name="spacing">Beautiful Syntax</a></p>

<p>A. Parens, Braces, Linebreaks</p>

<div class="highlight"><pre>
<span class="c1">// if/else/for/while/try always have spaces, braces and span multiple lines</span>
<span class="c1">// this encourages readability</span>

<span class="c1">// 2.A.1.1</span>
<span class="c1">// Examples of really cramped syntax</span>

<span class="k">if</span><span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="nx">doSomething</span><span class="p">();</span>

<span class="k">while</span><span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="nx">iterating</span><span class="o">++</span><span class="p">;</span>

<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">someIterativeFn</span><span class="p">();</span>

<span class="c1">// 2.A.1.1</span>
<span class="c1">// Use whitespace to promote readability</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="c1">// Even better:</span>

<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
  <span class="nx">length</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="c1">// Or...</span>

<span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">length</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">prop</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">prop</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>
</pre></div>

<p>B. Assignments, Declarations, Functions ( Named, Expression, Constructor )</p>

<div class="highlight"><pre>
<span class="c1">// 2.B.1.1</span>
<span class="c1">// Variables</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s2">"bar"</span><span class="p">,</span>
  <span class="nx">num</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">undef</span><span class="p">;</span>

<span class="c1">// Literal notations:</span>
<span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[],</span>
  <span class="nx">object</span> <span class="o">=</span> <span class="p">{};</span>

<span class="c1">// 2.B.1.2</span>
<span class="c1">// Using only one `var` per scope (function) promotes readability</span>
<span class="c1">// and keeps your declaration list free of clutter (also saves a few keystrokes)</span>

<span class="c1">// Bad</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">qux</span><span class="p">;</span>

<span class="c1">// Good</span>
<span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
  <span class="nx">bar</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
  <span class="nx">quux</span><span class="p">;</span>

<span class="c1">// or..</span>
<span class="kd">var</span> <span class="c1">// Comment on these</span>
<span class="nx">foo</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
<span class="nx">bar</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
<span class="nx">quux</span><span class="p">;</span>

<span class="c1">// 2.B.1.3</span>
<span class="c1">// var statements should always be in the beginning of their respective scope (function).</span>
<span class="c1">// Same goes for const and let from ECMAScript 6.</span>

<span class="c1">// Bad</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// some statements here</span>

  <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
    <span class="nx">qux</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Good</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="s2">""</span><span class="p">,</span>
    <span class="nx">qux</span><span class="p">;</span>

  <span class="c1">// all statements after the variables declarations.</span>
<span class="p">}</span>
</pre></div>

<div class="highlight"><pre>
<span class="c1">// 2.B.2.1</span>
<span class="c1">// Named Function Declaration</span>
<span class="kd">function</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">argN</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="nx">foo</span><span class="p">(</span><span class="nx">arg1</span><span class="p">,</span> <span class="nx">argN</span><span class="p">);</span>

<span class="c1">// 2.B.2.2</span>
<span class="c1">// Named Function Declaration</span>
<span class="kd">function</span> <span class="nx">square</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">number</span> <span class="o">*</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="nx">square</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

<span class="c1">// Really contrived continuation passing style</span>
<span class="kd">function</span> <span class="nx">square</span><span class="p">(</span><span class="nx">number</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">callback</span><span class="p">(</span><span class="nx">number</span> <span class="o">*</span> <span class="nx">number</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">square</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">square</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// callback statements</span>
<span class="p">});</span>

<span class="c1">// 2.B.2.3</span>
<span class="c1">// Function Expression</span>
<span class="kd">var</span> <span class="nx">square</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Return something valuable and relevant</span>
  <span class="k">return</span> <span class="nx">number</span> <span class="o">*</span> <span class="nx">number</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Function Expression with Identifier</span>
<span class="c1">// This preferred form has the added value of being</span>
<span class="c1">// able to call itself and have an identity in stack traces:</span>
<span class="kd">var</span> <span class="nx">factorial</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">factorial</span><span class="p">(</span><span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">number</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">number</span> <span class="o">*</span> <span class="nx">factorial</span><span class="p">(</span><span class="nx">number</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// 2.B.2.4</span>
<span class="c1">// Constructor Declaration</span>
<span class="kd">function</span> <span class="nx">FooBar</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Usage</span>
<span class="kd">var</span> <span class="nx">fooBar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FooBar</span><span class="p">({</span> <span class="nx">a</span><span class="o">:</span> <span class="s2">"alpha"</span> <span class="p">});</span>

<span class="nx">fooBar</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>
<span class="c1">// { a: "alpha" }</span>

</pre></div>

<p>C. Consistency Always Wins</p>

<p>In sections 2.A-2.C, the whitespace rules are set forth as a recommendation with a simpler, higher purpose: consistency.
It's important to note that formatting preferences, such as "inner whitespace" should be considered optional, but only one style should exist across the entire source of your project.</p>

<div class="highlight"><pre>
<span class="c1">// 2.D.1.1</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="k">while</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">// statements</span>
<span class="p">}</span>

</pre></div>

<p>D. Quotes</p>

<p>Use only single quotes for strings for the sake of consistency. </p>

<p>F. End of Lines and Empty Lines</p>

<p>Whitespace can ruin diffs and make changesets impossible to read. Consider incorporating a pre-commit hook that removes end-of-line whitespace and blanks spaces on empty lines automatically.</p>
</li>
<li>
<p><a name="type">Type Checking (Courtesy jQuery Core Style Guidelines and Underscore.js)</a></p>

<p>A. Actual Types</p>

<p>String:</p>

<pre><code>_.isString(variable)
</code></pre>

<p>Number:</p>

<pre><code>_.isNumber(variable)
</code></pre>

<p>Boolean:</p>

<pre><code>_.isBoolean(variable)
</code></pre>

<p>Object:</p>

<pre><code>_.isObject(variable)
</code></pre>

<p>Array:</p>

<pre><code>_.isArray(arrayLikeObject)
</code></pre>

<p>Node:</p>

<pre><code>elem.nodeType === 1
</code></pre>

<p>null:</p>

<pre><code>_.isNull(variable)
</code></pre>

<p>null or undefined:</p>

<pre><code>_.isNull(variable) || _.isUndefined(variable)
</code></pre>

<p>undefined:</p>

<p>Global Variables:</p>

<pre><code>typeof variable === "undefined"
</code></pre>

<p>Local Variables and properties:</p>

<pre><code>_.isUndefined(variable)
_.isUndefined(object.prop)
</code></pre>

<p>B. Coerced Types</p>

<p>Avoid implicit type coercion. Use only <code>===</code> and <code>!==</code> for comparison. Prefer <code>parseInt(value, 10)</code> or <code>parseFloat(value)</code> to unary + or - operators.</p>
</li>
<li>
<p><a name="cond">Conditional Evaluation</a></p>

<div class="highlight"><pre>
<span class="c1">// 4.1.1</span>
<span class="c1">// When only evaluating that an array has length,</span>
<span class="c1">// instead of this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// ...evaluate truthiness, like this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// 4.1.2</span>
<span class="c1">// When only evaluating that an array is empty,</span>
<span class="c1">// instead of this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// ...evaluate truthiness, like this:</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// 4.1.3</span>
<span class="c1">// When only evaluating that a string is not empty,</span>
<span class="c1">// instead of this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">string</span> <span class="o">!==</span> <span class="s2">""</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// ...evaluate truthiness, like this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// 4.1.4</span>
<span class="c1">// When only evaluating that a string _is_ empty,</span>
<span class="c1">// instead of this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">string</span> <span class="o">===</span> <span class="s2">""</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// ...evaluate falsy-ness, like this:</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">string</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// 4.1.5</span>
<span class="c1">// When only evaluating that a reference is true,</span>
<span class="c1">// instead of this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">foo</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// ...evaluate like you mean it, take advantage of built in capabilities:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// 4.1.6</span>
<span class="c1">// When evaluating that a reference is false,</span>
<span class="c1">// instead of this:</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">foo</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// ...use negation to coerce a true evaluation</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">foo</span><span class="p">)</span> <span class="p">...</span>

<span class="c1">// ...Be careful, this will also match: 0, "", null, undefined, NaN</span>
<span class="c1">// If you _MUST_ test for a boolean false, then use</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">foo</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">...</span>

</pre></div>

<p>ALWAYS evaluate for the best, most accurate result - the above is a guideline, not a dogma.</p>
</li>
<li>
<p><a name="practical">Practical Style</a></p>

<div class="highlight"><pre>
<span class="c1">// 5.1.1</span>
<span class="c1">// A Practical Module</span>

<span class="nx">define</span><span class="p">(</span><span class="s1">'path/to/module'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'path/to/dep1'</span><span class="p">,</span> <span class="s1">'path/to/dep2'</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dep1</span><span class="p">,</span> <span class="nx">dep2</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="s2">"secret"</span><span class="p">;</span>

  <span class="c1">// Other things might happen here</span>

  <span class="c1">// expose our module to the global object</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="c1">// This is some boolean property</span>
    <span class="nx">bool</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// Some string value</span>
    <span class="nx">string</span><span class="o">:</span> <span class="s2">"a string"</span><span class="p">,</span>
    <span class="c1">// An array property</span>
    <span class="nx">array</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span> <span class="p">],</span>
    <span class="c1">// An object property</span>
    <span class="nx">object</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">lang</span><span class="o">:</span> <span class="s2">"en-Us"</span>
    <span class="p">},</span>
    <span class="nx">getData</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// get the current value of `data`</span>
      <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">setData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// set the value of `data` and return it</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="p">});</span>

</pre></div>

<div class="highlight"><pre>
<span class="c1">// 5.2.1</span>
<span class="c1">// A Practical Constructor</span>

<span class="nx">define</span><span class="p">(</span><span class="s1">'path/to/module'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'path/to/dep1'</span><span class="p">,</span> <span class="s1">'path/to/dep2'</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dep1</span><span class="p">,</span> <span class="nx">dep2</span><span class="p">)</span> <span class="p">{</span>

  <span class="kd">function</span> <span class="nx">Ctor</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="nx">Ctor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getFoo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">Ctor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setFoo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="nx">val</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="c1">// expose our constructor to the global object</span>
  <span class="k">return</span> <span class="nx">Ctor</span><span class="p">;</span>

<span class="p">});</span>

</pre></div>
</li>
<li>
<p><a name="naming">Naming</a></p>

<p>A. You are not a human code compiler/compressor, so don't try to be one.</p>

<p>The following code is an example of egregious naming:</p>

<div class="highlight"><pre>
<span class="c1">// 6.A.1.1</span>
<span class="c1">// Example of code with poor names</span>

<span class="kd">function</span> <span class="nx">q</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">i</span><span class="p">,</span><span class="nx">a</span><span class="o">=</span><span class="p">[],</span><span class="nx">els</span><span class="o">=</span><span class="nx">q</span><span class="p">(</span><span class="s2">"#foo"</span><span class="p">);</span>
<span class="k">for</span><span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">els</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">els</span><span class="p">[</span><span class="nx">i</span><span class="p">]);}</span>
</pre></div>

<p>Without a doubt, you've written code like this - hopefully that ends today.</p>

<p>Here's the same piece of logic, but with kinder, more thoughtful naming (and a readable structure):</p>

<div class="highlight"><pre>
<span class="c1">// 6.A.2.1</span>
<span class="c1">// Example of code with improved names</span>

<span class="kd">function</span> <span class="nx">query</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">elements</span> <span class="o">=</span> <span class="p">[],</span>
  <span class="nx">matches</span> <span class="o">=</span> <span class="nx">query</span><span class="p">(</span><span class="s2">"#foo"</span><span class="p">),</span>
  <span class="nx">length</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(;</span> <span class="nx">idx</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">idx</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">elements</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">matches</span><span class="p">[</span> <span class="nx">idx</span> <span class="p">]);</span>
<span class="p">}</span>

</pre></div>

<p>A few additional naming pointers:</p>

<div class="highlight"><pre>
<span class="c1">// 6.A.3.1</span>
<span class="c1">// Naming strings</span>

<span class="err">`</span><span class="nx">dog</span><span class="err">`</span> <span class="nx">is</span> <span class="nx">a</span> <span class="nx">string</span>

<span class="c1">// 6.A.3.2</span>
<span class="c1">// Naming arrays</span>

<span class="err">`</span><span class="nx">dogs</span><span class="err">`</span> <span class="nx">is</span> <span class="nx">an</span> <span class="nx">array</span> <span class="nx">of</span> <span class="err">`</span><span class="nx">dog</span><span class="err">`</span> <span class="nx">strings</span>

<span class="c1">// 6.A.3.3</span>
<span class="c1">// Naming functions, objects, instances, etc</span>

<span class="nx">camelCase</span><span class="p">;</span> <span class="kd">function</span> <span class="nx">and</span> <span class="kd">var</span> <span class="nx">declarations</span>

<span class="c1">// 6.A.3.4</span>
<span class="c1">// Naming constructors, prototypes, etc.</span>

<span class="nx">PascalCase</span><span class="p">;</span> <span class="nx">constructor</span> <span class="kd">function</span>

<span class="c1">// 6.A.3.5</span>
<span class="c1">// From the Google Closure Library Style Guide</span>

<span class="nx">functionNamesLikeThis</span><span class="p">;</span>
<span class="nx">variableNamesLikeThis</span><span class="p">;</span>
<span class="nx">ConstructorNamesLikeThis</span><span class="p">;</span>
<span class="nx">EnumNamesLikeThis</span><span class="p">;</span>
<span class="nx">methodNamesLikeThis</span><span class="p">;</span>
<span class="nx">SYMBOLIC_CONSTANTS_LIKE_THIS</span><span class="p">;</span>

</pre></div>

<p>B. Faces of <code>this</code></p>

<p>Beyond the generally well known use cases of <code>call</code> and <code>apply</code>, always prefer <code>_.bind(fn, this)</code>, for creating <code>BoundFunction</code> definitions for later invocation. Only resort to aliasing when no preferable option is available.</p>

<div class="highlight"><pre><span class="c1">// 6.B.2</span>

<span class="c1">// eg. lodash/underscore, _.bind()</span>
<span class="kd">function</span> <span class="nx">Device</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="nx">stream</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span> <span class="nx">_</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>

  <span class="p">},</span> <span class="k">this</span><span class="p">));</span>

  <span class="nx">setInterval</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s2">"event"</span><span class="p">);</span>

  <span class="p">},</span> <span class="k">this</span><span class="p">),</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">freq</span> <span class="o">||</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>

</pre></div>

<p>As a last resort, create an alias to <code>this</code> using <code>self</code> as an Identifier. This is extremely bug prone and should be avoided whenever possible.</p>

<div class="highlight"><pre>
<span class="c1">// 6.B.3</span>

<span class="kd">function</span> <span class="nx">Device</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="nx">stream</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>

  <span class="p">});</span>

  <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s2">"event"</span><span class="p">);</span>

  <span class="p">},</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">freq</span> <span class="o">||</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>

</pre></div>

<p>C. Use <code>thisArg</code></p>

<p>Several Array methods of underscore.js support <code>thisArg</code> signature, which should be used whenever possible</p>

<div class="highlight"><pre>
<span class="c1">// 6.C.1</span>

<span class="kd">var</span> <span class="nx">obj</span><span class="p">;</span>

<span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">f</span><span class="o">:</span> <span class="s2">"foo"</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="s2">"bar"</span><span class="p">,</span> <span class="nx">q</span><span class="o">:</span> <span class="s2">"qux"</span> <span class="p">};</span>

<span class="nx">_</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// |this| now refers to `obj`</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">[</span> <span class="nx">key</span> <span class="p">]);</span>

<span class="p">},</span> <span class="nx">obj</span> <span class="p">);</span> <span class="c1">// &lt;-- the last arg is `thisArg`</span>

<span class="c1">// Prints...</span>

<span class="c1">// "foo"</span>
<span class="c1">// "bar"</span>
<span class="c1">// "qux"</span>

</pre></div>
</li>
<li>
<p><a name="misc">Misc</a></p>

<p>This section will serve to illustrate ideas and concepts that should not be considered dogma, but instead exists to encourage questioning practices in an attempt to find better ways to do common JavaScript programming tasks.</p>

<p>A. Early returns promote code readability with negligible performance difference</p>

<div class="highlight"><pre>
<span class="c1">// 7.B.1.1</span>
<span class="c1">// Bad:</span>
<span class="kd">function</span> <span class="nx">returnLate</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="s2">"foo"</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="s2">"quux"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Good:</span>

<span class="kd">function</span> <span class="nx">returnEarly</span><span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"foo"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="s2">"quux"</span><span class="p">;</span>
<span class="p">}</span>

</pre></div>
</li>
<li>
<p><a name="comments">Comments</a></p>

<h4>
<a name="single-line-above-the-code-that-is-subject" class="anchor" href="#single-line-above-the-code-that-is-subject"><span class="octicon octicon-link"></span></a>Single line above the code that is subject</h4>

<h4>
<a name="multiline-is-good" class="anchor" href="#multiline-is-good"><span class="octicon octicon-link"></span></a>Multiline is good</h4>

<h4>
<a name="jsdoc-style-is-good-but-requires-a-significant-time-investment" class="anchor" href="#jsdoc-style-is-good-but-requires-a-significant-time-investment"><span class="octicon octicon-link"></span></a>JSDoc style is good, but requires a significant time investment</h4>
</li>
<li>
<p><a name="language">One Language Code</a></p>

<p>Programs should be written in one language, whatever that language may be, as dictated by the maintainer or maintainers.</p>
</li>
</ol><hr><p><a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by/3.0/80x15.png"></a><br>Principles of Writing Consistent, Idiomatic JavaScript by <a href="https://github.com/rwldrn/idiomatic.js" rel="cc:attributionURL">Rick Waldron and Contributors</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a>.<br>Based on a work at <a href="https://github.com/rwldrn/idiomatic.js" rel="dct:source">github.com/rwldrn/idiomatic.js</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Idiomatic.js maintained by <a href="https://github.com/chetansastry">chetansastry</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
